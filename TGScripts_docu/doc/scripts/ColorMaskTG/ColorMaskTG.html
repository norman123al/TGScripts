<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
   <title>PixInsight Reference Documentation | ColorMaskTG</title>
   <meta name="keywords" content="mask creation" />
   <meta name="author" content="Thorsten Glebe" />
   <meta name="description" content="A mask creation script using the HSI (hue, intensity, saturation) readout space." />
   <meta name="robots" content="INDEX,FOLLOW" />
   <meta name="generator" content="PixInsight Documentation Compiler script version 1.6.9" />
   <script type="text/javascript" src="../../pidoc/scripts/pidoc-utility.js"></script>
   <link type="text/css" href="../../pidoc/css/pidoc-common.css" rel="stylesheet" />
   <link type="text/css" href="../../pidoc/css/pidoc-highlight.css" rel="stylesheet" />
   <link type="text/css" href="../../pidoc/css/pidoc-tool.css" rel="stylesheet" />
   <link rel="icon" href="../../pidoc/icons/pidoc-icon.png" type="image/png" />
   <link rel="shortcut icon" href="../../pidoc/icons/pidoc-icon.png" type="image/png" />
</head>
<body>
<script type="text/javascript">
   pidoc_generateDynamicContents();
</script>

<h1>ColorMaskTG</h1>

<div id="authors">
<p>By Thorsten Glebe</p>
</div>

<hr class="separator"/>

<div id="brief">
<p>A mask creation script using the HSI (hue, intensity, saturation) readout space. <a href="#__contents__">[more]</a></p></div>

<div id="keywords">
<p><strong>Keywords:</strong> mask creation</p>
</div>

<h3 class="pidoc_sectionTitle" id="__toc__">Contents</h3>
<p class="pidoc_sectionToggleButton" onclick="pidoc_toggleSection( 'toc', this );">[hide]</p>
<div id="toc">
<ul>
<li class="pidoc_tocItem"><a href="#__Description__">1&emsp;Description</a></li>
<li class="pidoc_tocItem"><a href="#__Parameter_Reference__">2&emsp;Parameter Reference</a></li>
</ul>
</div>

<div id="__contents__">

<div class="pidoc_section" id="__Description__">
   <h3 class="pidoc_sectionTitle">1&emsp;Description</h3>
   <p class="pidoc_sectionToggleButton" onclick="pidoc_toggleSection( 'Description', this );">[hide]</p>
   <div id="Description">
<img style="float:left;margin-right:1.25em;margin-bottom:0.5em;" src="images/ColorMaskTG_main_screen.png" alt=""/>
<p>The ColorMask script has been developed in 2017 by Rick Stevenson, however it contained an issue which was investigated and well described by Adam Block in a youtube video on his channel: <a href="https://www.youtube.com/watch?v=3WzAwOw_nng&t=1s" title="https://www.youtube.com/watch?v=3WzAwOw_nng&t=1s">PixInsight ColorMask Script: Confusion and Analysis</a>. From his description I could easily figure out the fix which then was published in another video by Adam: <a href="https://www.youtube.com/watch?v=GwU7z1tNvB4&t=5s" title="https://www.youtube.com/watch?v=GwU7z1tNvB4&t=5s">PixInsight ColorMaskScript FIX!</a>. I took the opportunity and played a bit more with the script and saw that it's capabilites were still quite limited so I added more options for mask generation. Now the script has the capability to create masks for almost any kind of processing task.</p>
<p>The hue, intensity and saturation range can be best determined by switching the readout data to 'HSI':</p>

<div style="text-align:center;">
<img style="float:left;width:60%;" src="images/ColorMaskTG_hsi_readout.png" alt=""/>
</div>
<p>Then image cursor can be used to determine the upper and lower bounds of the parameters from the image regions which are subject to mask generation:</p>

<div style="text-align:center;">
<img style="float:left;width:60%;" src="images/ColorMaskTG_image_cursor.png" alt=""/>
</div>
   </div>
</div>

<div class="pidoc_section" id="__Parameter_Reference__">
   <h3 class="pidoc_sectionTitle">2&emsp;<a id="parameter_reference"></a>Parameter Reference</h3>
   <p class="pidoc_sectionToggleButton" onclick="pidoc_toggleSection( 'Parameter_Reference', this );">[hide]</p>
   <div id="Parameter_Reference">

<dl class="pidoc_list">
<dt>
<p><a id="target_image"></a> Target Image</p>
</dt>
<dd>
<p>The target image control allows to choose a main view of an RGB image as a target for mask generation. Only RGB images are accepted for mask creation as other tools exists for mask generation from grayscale images (e.g. HistogramTransformation).</p>
</dd>
</dl>


<dl class="pidoc_list">
<dt>
<p><a id="hue_selection"></a> Hue Selection</p>
</dt>
<dd>

<div style="text-align:center;">
<img style="float:left;width:60%;" src="images/ColorMaskTG_hue_selection.png" alt=""/>
</div>
<p>The hue can be selected either manuall via the image cursor (see description above) or using the push buttons for predifined color ranges. This is the functionality from the original script.</p>
</dd>
</dl>


<dl class="pidoc_list">
<dt>
<p><a id="intensity_selection"></a> Intensity Selection</p>
</dt>
<dd>

<div style="text-align:center;">
<img style="float:left;width:60%;" src="images/ColorMaskTG_intensity_selection.png" alt=""/>
</div>
<p>Minimum and Maximum intensity can be selected via the image cursor (I-value) by setting the 'Min Int.' and 'Max Int.' sliders. By default the full range is selected.</p>
</dd>
</dl>


<dl class="pidoc_list">
<dt>
<p><a id="saturation_selection"></a> Saturation Selection</p>
</dt>
<dd>

<div style="text-align:center;">
<img style="float:left;width:60%;" src="images/ColorMaskTG_saturation_selection.png" alt=""/>
</div>
<p>Minimum and Maximum saturation can be selected via the image cursor (S-value) by setting the 'Min Sat.' and 'Max Sat.' sliders. By default the full range is selected.</p>
</dd>
</dl>


<dl class="pidoc_list">
<dt>
<p><a id="mask_modes"></a> Mask Modes</p>
</dt>
<dd>

<div style="text-align:center;">
<img style="float:left;width:60%;" src="images/ColorMaskTG_inv_lightness.png" alt=""/>
</div>
<p>A new mask mode 'Inv. Lightness Mask' was added which is the inversion of the 'Lightness Mask'. This allows to generate masks for dimm parts of the image, where brigher parts are protected. The 'Lightness Mask' mode works the inverse way, protecting dimm parts of the image.</p>
</dd>
</dl>


<dl class="pidoc_list">
<dt>
<p><a id="mask_name"></a> Mask Name</p>
</dt>
<dd>

<div style="text-align:center;">
<img style="float:left;width:60%;" src="images/ColorMaskTG_mask_name.png" alt=""/>
</div>
<p>For convenience, a user specified mask name can be provided via the 'Mask Nnme' text field. If unused the script will generate a name for the mask.</p>
</dd>
</dl>


<dl class="pidoc_list">
<dt>
<p><a id="new_instance"></a> New instance button</p>
</dt>
<dd>
<p>A 'new instance' button (triangular button at the bottom left) has been added which can be used to create an icon instance on the Pixinsight desktop which contains the current state of the script. This allows to conveniently integrate the script into an icon set for image processing.</p>
</dd>
</dl>

   </div>
</div>

<hr class="separator"/>

<div id="copyright">
   <p>Copyright &copy; 2022 Dr. Thorsten Glebe</p>
</div>

<div id="footer">
   <p>Generated by the PixInsight Documentation Compiler script version 1.6.9 on 2022-10-31 13:21:57 UTC</p>
</div>
<br/>
<br/>

</div> <!-- contents -->

</body>
</html>
